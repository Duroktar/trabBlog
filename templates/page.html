{% extends "layout.html" %}
{% from "macros/blog.html" import render_blog_post %}
{% from "macros/pagination.html" import render_pagination %}
{% block title %}{{ this.title }}{% endblock %}
{% block body %}
<h2>{{ this.title }}</h2>
{{ this.body }}
  <ul class="blog-index">
  {% for page in this.pagination.items %}
      {% if page.path == "/blog" %}
        {% for post in page.pagination.items %}
            <li>
              <h3><a href="{{ post|url }}">{{ post.title }}</a></h3>
              <p class="meta">
                written by
                {% if post.twitter_handle %}
                  <a href="https://twitter.com/{{ post.twitter_handle
                    }}">{{ post.author or post.twitter_handle }}</a>
                {% else %}
                  {{ post.author }}
                {% endif %}
                on {{ post.pub_date }}
              </p>
            </li>
        {% endfor %}
      {% endif %}
  {% endfor %}
  </ul>


  {{ render_pagination(this.pagination) }}
{% endblock %}
